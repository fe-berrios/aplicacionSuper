<ion-header>
  <ion-toolbar>
    <ion-title>Crear Compra</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="compraForm" (ngSubmit)="saveCompra()">
    <!-- Nombre de la compra -->
    <ion-item>
      <ion-label position="stacked">Nombre de la compra</ion-label>
      <ion-input formControlName="nombre"></ion-input>
    </ion-item>

    <!-- Fecha -->
    <ion-item>
      <ion-label position="stacked">Fecha</ion-label>
      <ion-datetime formControlName="fecha" presentation="date"></ion-datetime>
    </ion-item>

    <!-- Lista de Ítems -->
    <ion-list>
      <div formArrayName="items">
        <ion-card *ngFor="let item of items.controls; let i = index" [formGroupName]="i">
          <ion-card-header>
            <ion-card-title>Ítem {{ i + 1 }}</ion-card-title>
          </ion-card-header>

          <ion-card-content>
            <ion-item>
              <ion-label position="stacked">Nombre del Ítem</ion-label>
              <ion-input placeholder="Nombre del ítem" formControlName="nombre"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="stacked">Cantidad</ion-label>
              <ion-input type="number" placeholder="Cantidad" formControlName="cantidad"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="stacked">Precio</ion-label>
              <ion-input type="number" placeholder="Precio" formControlName="precio"></ion-input>
            </ion-item>

            <!-- Botón para eliminar el ítem -->
            <ion-button expand="block" color="danger" fill="outline" (click)="removeItem(i)">
              Eliminar Ítem
            </ion-button>
          </ion-card-content>
        </ion-card>
      </div>
    </ion-list>

    <!-- Botón para agregar un ítem -->
    <ion-button expand="block" (click)="addItem()">Agregar Ítem</ion-button>

    <!-- Botón para guardar la compra -->
    <ion-button type="submit" expand="block" color="primary">Guardar Compra</ion-button>
  </form>
</ion-content>
